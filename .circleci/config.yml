version: 2.1
orbs:
  ci-tools: kanopi/ci-tools@1.4.0
  pantheon: pantheon-systems/pantheon@0.2.0
workflows:
  build_push_test:
    jobs:      
      - pantheon/push
      - repo_path:
          requires:
            - pantheon/push
      - ci-tools/phpcs-drupal:
          extensions: 'php,module,inc,install,test,profile,theme,css,info,txt,md'
          standards: 'Drupal,DrupalPractice'
          location: modules/blog
          requires:
            - pantheon/push
jobs:
  repo_path:
    docker:
    - image: quay.io/pantheon-public/build-tools-ci:5.x
    steps:    
    - run:
        name: 'Pantheon Repo Path'
        command: echo $PANTHEON_REPO_DIR